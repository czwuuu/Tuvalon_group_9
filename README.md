# Tuvalon_group_9

## 任务分工

- MerlinStrategy + PercivalStrategy:
- AssassinStrategy + MorganaStrategy:
- KnightStrategy + 代码统筹(辅助函数+RoleStrategy基类+Player类) + 测试:
- OberonStrategy + report编写:

## 代码结构说明

服务器直接调用Player类。Player类中和角色相关的方法，如walk(),say(),mission_vote1(),mission_vote2(),assass()等，统一放在相应的角色策略类中，6个角色策略类均继承自RoleStrategy基类。为使代码便于阅读，所有不被服务器直接调用的辅助函数全部在Player类之外定义。

## 策略说明

### MerlinStrategy

发言 (say)策略：
核心： 既要传递信息，又要保护自己。梅林非常依赖听力范围来决定发言的直接程度。
游戏早期 (前两轮左右)： 发言非常含蓄。如果发现有邪恶玩家不在自己的听力范围内，可能会旁敲侧击地暗示一下（例如，“P[邪恶玩家]的发言有点奇怪”）。通常会发表一些呼吁大家多沟通、保持警惕的通用言论。
游戏中后期： 会稍微直接一些，但依然谨慎。如果邪恶玩家不在听力范围内，可能会更明确地指出其危险性（例如，“我们必须警惕P[邪恶玩家]”）。如果邪恶玩家在听力范围内，则会使用更通用的警告（例如，“邪恶阵营正在混淆视听”）。
支持好人： 如果梅林识别出一些可信的好人（trusted_good），也会在确保安全（比如目标不在自己听力范围内）的情况下尝试支持他们。
通用发言： “我们需要一个能通过任务的队伍。” 这类发言比较中性，不易暴露身份。

组队 (decide_mission_member)策略：
核心： 挑选最不可能失败的队伍，确保任务成功。
优先选择：
梅林自己（通常好人上任务是好事）。
梅林确信的好人（trusted_good中的玩家）。
不在梅林已知邪恶名单（trusted_evil）中的玩家，即“安全玩家”。
排序逻辑： 在安全玩家中，会优先选择梅林信任度高（在trusted_good里）且嫌疑度低（suspicion_level低）的玩家。
避免： 绝对避免选择已知的邪恶玩家上任务。
补位： 如果人数不够，会从剩余的安全玩家中挑选。万不得已（理论上不应发生）才会从更广泛的玩家中选择，但始终会避开已知邪恶。

任务队伍投票 (mission_vote1)策略：
核心： 阻止包含已知邪恶爪牙的队伍，推动看起来“干净”的队伍。
必定反对： 如果队伍中有任何梅林已知的邪恶玩家，梅林会投反对票。这是梅林最重要的职责之一。
倾向赞成： 如果队伍中没有已知邪恶玩家，并且整体嫌疑度不高（特别是那些梅林认为是好人的玩家嫌疑度低），梅林会投赞成票。
谨慎情况： 如果队伍中虽然没有已知邪恶，但整体嫌疑度较高，且游戏尚处早期或中期，梅林可能会投反对票，除非当前投票轮次已经很靠后（比如第4或第5次提议，代码中此逻辑简化）。

执行任务投票 (mission_vote2)策略：
核心： 作为好人阵营，梅林在任务中总是投成功票。这是由 RoleStrategy 基类提供的默认行为，梅林继承此行为。

行走 (walk)策略：
继承自 RoleStrategy 基类的通用行走逻辑，随机移动，避免碰撞。梅林没有特殊的行走策略。

刺杀 (assassinate)策略：
梅林不执行刺杀，继承自 RoleStrategy 基类的默认行为（返回-1）。

### PercivalStrategy

发言 (say)策略：
核心： 围绕梅林和莫甘娜的候选人展开，试图获取信息并引导其他好人。
主要内容：
如果梅林/莫甘娜候选人（known_roles['Merlin_Morgana_candidates']）在派西维尔的听力范围内，可能会直接向他们喊话，敦促他们用行动证明身份或表明立场（例如，“P_X和P_Y，你们一个是梅林，一个是莫甘娜，请证明自己！”）。
如果候选人不在听力范围内，可能会向场上其他玩家宣告这两位候选人的身份，提醒大家注意观察。
发言会体现出自己识破伪装、保护梅林的决心。

组队 (decide_mission_member)策略：
核心： 利用组队机会测试梅林/莫甘娜候选人，收集信息。
优先选择：
派西维尔自己。
关键策略： 从两位梅林/莫甘娜候选人中选择一位加入队伍。通常会选择派西维尔感觉嫌疑度较低（即更像梅林）的那一位。目的是观察其在任务中的投票行为以及其他人的反应。
填充队员： 用派西维尔信任的其他玩家（嫌疑度低的）来填充队伍的剩余位置。
避免： 通常会避免同时将两位梅林/莫甘娜候选人都选入自己领导的队伍，尤其是在游戏早期或队伍人数较少时，因为这可能让莫甘娜更容易行事，或者让局势更混乱，不利于分辨。
补位： 如果人数不够，会从剩余玩家中选择嫌疑度最低的。

任务队伍投票 (mission_vote1)策略：
核心： 基于对梅林/莫甘娜候选人的观察和测试需求来投票。
强烈倾向赞成： 如果队伍中恰好包含一位梅林/莫甘娜候选人，派西维尔通常会投赞成票，以便观察。
谨慎对待： 如果队伍中包含两位梅林/莫甘娜候选人，派西维尔会比较谨慎。如果队伍人数较少，可能会投反对票（防止梅林和莫甘娜都在，莫甘娜捣乱）。如果队伍人数多，可能会根据自己对两位候选人的判断随机投票或小概率赞成。
自己上队： 如果派西维尔自己在队伍中：若有一位候选人也在，则赞成；若没有候选人，则看队伍整体嫌疑度决定。
无候选人在队： 如果队伍中没有梅林/莫甘娜候选人（且派西维尔自己也不在队里），派西维尔有较大几率投反对票，目的是希望后续能产生一个包含候选人的队伍配置。
通用逻辑： 在不影响观察候选人的前提下，派西维尔会赞成整体嫌疑度较低的队伍。

执行任务投票 (mission_vote2)策略：
核心： 作为好人阵营，派西维尔在任务中总是投成功票。继承自 RoleStrategy 基类的默认行为。

刺杀 (assassinate)策略：
派西维尔不执行刺杀，继承自 RoleStrategy 基类的默认行为。

### AssassinStrategy

### MorganaStrategy

### KnightStrategy

### OberonStrategy
